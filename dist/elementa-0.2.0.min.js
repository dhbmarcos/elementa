/* Copyright (c) 2025 D. H. B. Marcos. Deo omnis gloria. */
window.elementa={templates:{},render:{tag:function(tag,properties,children){void 0===properties&&(properties={}),void 0===children&&(children=[]);tag=window.elementa.templates[tag.toUpperCase()];if(!tag)return null;var e,t,r,n=tag.cloneNode(!0);for(e in properties)properties.hasOwnProperty(e)&&(t=n.querySelector("#"+e))&&((r=properties[e])instanceof Node?(t.innerHTML="",t.appendChild(r)):t.textContent=r);if(0<children.length){var a,o=n.querySelector("#inner")||n;for(a of children)o.appendChild(a)}return n},page:function(){function e(element){var e,t={};for(e of element.attributes)t[e.name]=e.value;return t}var t,r,n;window.elementa.templates={};for(t of document.querySelectorAll("template")){var a=t.getAttribute("name");if(a){t.attributes.removeNamedItem("name");var o,i=document.createElement(a);for(o of t.attributes)i.setAttribute(o.name,o.value);var l=t.innerHTML;l&&(i.innerHTML=l),a&&(window.elementa.templates[a.toUpperCase()]=i)}}for(r of Object.keys(window.elementa.templates))for(n of document.querySelectorAll(r))if(!n.closest("template")){var d,p=e(n),m=[];for(d of n.children){var s=e(d);m.push(window.elementa.render.tag(d.tagName,s))}p=window.elementa.render.tag(r,p,m);n.replaceWith(p)}}}},window.addEventListener("load",elementa.render.page);