/* Copyright (c) 2025 D. H. B. Marcos. Deo omnis gloria. */
window.elementa={templates:{},render:{tag:function(template,attributes,children){if(attributes=attributes||{},children=children||[],!(template=window.elementa.templates[template.toUpperCase()]))return null;var e,t=template.cloneNode(!0);for(e in attributes){var r,n=t.querySelector("#"+e);n&&(r=attributes[e],n.innerHTML=r)}if(0<children.length){var a=t.querySelector("#inner")||t;if(children instanceof Array)for(var l of children)a.appendChild(l);else children instanceof Node?a.appendChild(children):((template=document.createElement("spam",children)).innerHTML=children,a.appendChild(template))}return t},page:function(){function e(element){var e,t={};for(e of element.attributes)t[e.name]=e.value;return t}window.elementa.templates={};for(var t of document.querySelectorAll("template")){var r=t.getAttribute("id");let e=t.getAttribute("tag");if(r||e){e=e||r,e=document.createElement(e);for(var n of t.attributes)"id"!=n.name&&e.setAttribute(n.name,n.value);t=t.innerHTML;t&&(e.innerHTML=t),window.elementa.templates[r.toUpperCase()]=e}}for(var a of Object.keys(window.elementa.templates))for(var l of document.querySelectorAll(a))if(!l.closest("template")){var i,o=e(l),d=[];for(i of l.children){var m=e(i);d.push(window.elementa.render.tag(i.tagName,m))}o=window.elementa.render.tag(a,o,d);l.replaceWith(o)}}}},window.addEventListener("load",elementa.render.page);